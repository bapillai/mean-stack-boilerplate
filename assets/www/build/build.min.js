"use strict";var app=angular.module("app",["ngRoute","ngMaterial","datatables","ngResource"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/login",{templateUrl:"www/js/templates/login/login.html",controller:"loginController"}).when("/dashboard",{templateUrl:"www/js/templates/dashboard/dashboard.html",controller:"dashboardController"}).otherwise({redirectTo:"/login"})}]),app.controller("headerController",["$scope","$location","$rootScope",function(a,b,c){a.loginName=c.userName}]),app.controller("loginController",["$scope","$location","$rootScope","loginService",function(a,b,c,d){a.errorFlag=!1,c.token="",a.userDetails={username:"",password:""},a.login=function(e){e.$valid&&a.userDetails.username.length>0&&a.userDetails.password.length>0?d.userLogin(a.userDetails).then(function(a){c.token=a.token,void 0==c.token&&null==c.token||d.getUserDetails(c.token).then(function(a){c.welcomeMessage=a.msg,c.userName=a.username,c.id=a.id,b.path("/dashboard")})}):a.errorFlag=!0,!a.disableLogin&&a.userDetails.username.length>0&&a.userDetails.password.length>0&&(a.disableLogin=!0)}}]),app.controller("dashboardController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope",function(a,b,c,d,e,f){function g(){c.loadAll().then(function(b){j=b,a.panels=[].concat(b),a.selected=a.panels[0]})}function h(a){b(a).toggle()}function i(b){a.selected=angular.isNumber(b)?a.panels[b]:b,a.toggleSidenav("left")}var j=[];a.selected=null,a.panels=j,a.selectPanel=i,a.toggleSidenav=h,g(),a.getTemplate=function(a){switch(a){case"Home":return"www/js/templates/home/home.html";case"Sales":return"www/js/templates/sales/sales.html";case"Items":return"www/js/templates/items/items.html";case"Employees":return"www/js/templates/employees/employee.html";case"Locations":return"www/js/templates/location/location.html";case"Sections":return"www/js/templates/sections/sections.html";case"Tables":return"www/js/templates/tables/tables.html";case"Orders":return"www/js/templates/orders/orders.html";case"Devices":return"www/js/templates/devices/devices.html";case"Inventory":return"www/js/templates/inventory/inventory.html";case"Settings":return"www/js/templates/settings/settings.html";default:return"www/js/templates/home/home.html"}}}]),app.service("panelService",["$q",function(a){var b=[{name:"Home"},{name:"Sales"},{name:"Items"},{name:"Employees"},{name:"Locations"},{name:"Sections"},{name:"Tables"},{name:"Orders"},{name:"Devices"},{name:"Inventory"},{name:"Settings"}];return{loadAll:function(){return a.when(b)}}}]),app.controller("addEmployeeController",["$scope","$mdSidenav","panelService","$route","$timeout","$log","$rootScope","employeeDataService","locationDataService","sectionDataService",function(a,b,c,d,e,f,g,h,i,j){a.successMessage="",a.locationListForEmployee=[],a.sectionListForEmployee=[],a.selectedLocationIdEmp="",a.selectedLocationNameEmp="",a.formClear=function(){a.inputName="",a.inputPhone="",a.inputEmail="",a.inputLocation="",a.inputSection="",a.selectedRole="",a.inputRestaurant=""},a.getLocationSelected=function(b){if(null!=a.inputLocation&&void 0!=a.inputLocation&&""!=a.inputLocation){var c=a.inputLocation,d=$.grep(a.locationListForEmployee,function(a){return a.locationId==c});a.selectedLocationIdEmp=d[0].locationId,a.selectedLocationNameEmp=d[0].locationName}},a.getLocationList=function(){i.getAllLocation(g.token).then(function(b){for(var c=0;c<b.location.length;c++)a.locationListForEmployee.push({locationName:b.location[c].locationName,locationId:b.location[c].locationId})})},a.getSectionList=function(){j.getAllSection(g.token).then(function(b){for(var c=0;c<b.section.length;c++)a.sectionListForEmployee.push({sectionName:b.section[c].sectionName,sectionId:b.section[c].sectionId})})},a.getLocationList(),a.getSectionList(),a.saveData=function(){var b=[{name:a.inputName,phoneNumber:a.inputPhone,email:a.inputEmail,locationId:a.selectedLocationIdEmp,locationName:a.selectedLocationNameEmp,sectionName:a.inputSection,role:a.selectedRole}];h.addNewEmployee(b).then(function(b){a.formClear(),a.successMessage=b.msg,e(function(){a.successMessage="",g.showEmployeeForm=!1,d.reload()},3e3)})}}]),app.controller("employeeController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","employeeDataService",function(a,b,c,d,e,f,g){f.showEmployeeForm=!1,a.successMessage="",a.showAddEmployeeForm=function(){f.showEmployeeForm=!0}}]),app.controller("employeeListController",["$resource","$http","$q","$scope","DTOptionsBuilder","DTColumnBuilder","$interval","$rootScope","$timeout","employeeDataService",function(a,b,c,d,e,f,g,h,i,j){h.showEmployeeForm=!1,d.dTable=this,d.dTable.dtInstance={},d.productTableServerData=[],d.rowCallback=function(a,b,c,d){var e=angular.element(a);return e.unbind("click").bind("click",function(a){}),a},d.convertTableData=function(){var a=c.defer();return a.resolve(d.productTableServerData),a.promise},d.setTableHeaderForType=function(){d.productTableData.aoColumns=[f.newColumn("name").notSortable().withTitle("Name").renderWith(function(a,b,c){var d;return d=void 0!=c.name&&null!=c.name&&""!=c.name?" <span><i> "+c.name+"</span></i> ":" <span><i> NA  </span></i> "}),f.newColumn("phoneNumber").notSortable().withTitle("Phone Number").renderWith(function(a,b,c){var d;return d=void 0!=c.phoneNumber&&""!=c.phoneNumber&&null!=c.phoneNumber?" <span><i> "+c.phoneNumber+"</span></i> ":" <span><i> NA  </span></i> "}),f.newColumn("email").notSortable().withTitle("Email").renderWith(function(a,b,c){var d;return d=void 0!=c.email&&""!=c.email&&null!=c.email?" <span><i> "+c.email+"</span></i> ":" <span><i> NA  </span></i> "}),f.newColumn("locationName").notSortable().withTitle("Location Name").renderWith(function(a,b,c){var d;return d=void 0!=c.locationName&&""!=c.locationName&&null!=c.locationName?" <span><i> "+c.locationName+"</span></i> ":" <span><i> NA  </span></i> "}),f.newColumn("role").notSortable().withTitle("Role").renderWith(function(a,b,c){var d;return d=" <span><i> "+c.role+"</span></i> ",d=void 0!=c.role&&""!=c.role&&null!=c.role?" <span><i> "+c.role+"</span></i> ":" <span><i> NA  </span></i> "})],d.dTable.dtColumns=d.productTableData.aoColumns},d.getAjaxData=function(){j.getAllEmployees(h.token).then(function(a){for(var b=[],c=0;c<a.employees.length;c++)b.push(a.employees[c]);d.productTableServerData=b,d.setTableHeaderForType(),d.dTable.dtInstance.changeData&&d.dTable.dtInstance.changeData(d.convertTableData)})};i(function(){d.getAjaxData()},300);d.productTableData={aaData:[],aoColumns:[]},d.setTableHeaderForType(),d.dTable.dtOptions=e.fromFnPromise(d.convertTableData()).withPaginationType("simple").withDisplayLength(10).withOption("rowCallback",d.rowCallback)}]),app.controller("addLocationController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","locationDataService","$route",function(a,b,c,d,e,f,g,h){a.successMessage="",a.formClear=function(){a.inputLocation=""},a.saveDataLocation=function(){if(null!=a.inputLocation&&void 0!=a.inputLocation){var b=[{locationName:a.inputLocation,sections:"",orders:{orderId:"ajhsd79s8ad",employeeId:1234,tableId:809,locationId:"amdshj999",inventoryItems:[{inventoryId:"89jk207",inventoryName:"rose-flavour",price:200,quantity:1},{inventoryId:"89jk208",inventoryName:"rose-flavour",price:300,quantity:2}]}}];g.addNewLocation(b).then(function(b){a.formClear(),a.successMessage=b.msg,d(function(){a.successMessage="",f.showLocationForm=!1,h.reload()},3e3)})}}}]),app.controller("locationController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","locationDataService",function(a,b,c,d,e,f,g){f.showLocationForm=!1,a.successMessage="",a.showAddLocationForm=function(){f.showLocationForm=!0}}]),app.controller("locationListController",["$resource","$http","$q","$scope","DTOptionsBuilder","DTColumnBuilder","$interval","$rootScope","$timeout","locationDataService",function(a,b,c,d,e,f,g,h,i,j){h.showLocationForm=!1,d.dTable=this,d.dTable.dtInstance={},d.productTableServerData=[],d.rowCallback=function(a,b,c,d){var e=angular.element(a);return e.unbind("click").bind("click",function(a){}),a},d.convertTableData=function(){var a=c.defer();return a.resolve(d.productTableServerData),a.promise},d.setTableHeaderForType=function(){d.productTableData.aoColumns=[f.newColumn("locationId").notSortable().withTitle("Location ID").renderWith(function(a,b,c){var d;return d=null!=c.locationId&&void 0!=c.locationId&&""!=c.locationId?" <span><i> "+c.locationId+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("locationName").notSortable().withTitle("Location Name").renderWith(function(a,b,c){var d;return d=null!=c.locationName&&void 0!=c.locationName&&""!=c.locationName?" <span><i> "+c.locationName+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("sectionName").notSortable().withTitle("Sections").renderWith(function(a,b,c){var d;return d=null!=c.sectionName&&void 0!=c.sectionName&&""!=c.sectionName?" <span><i> "+c.sectionName+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("orders").notSortable().withTitle("Orders").renderWith(function(a,b,c){var d;return d=null!=c.orders&&void 0!=c.orders&&""!=c.orders&&null!=c.orders.orderId&&void 0!=c.orders.orderId&&""!=c.orders.orderId?" <span><i> "+c.orders.orderId+"</span></i> ":" <span><i> NA </span></i> "})],d.dTable.dtColumns=d.productTableData.aoColumns},d.getAjaxData=function(){j.getAllLocation(h.token).then(function(a){for(var b=[],c=0;c<a.location.length;c++)b.push(a.location[c]);d.productTableServerData=b,d.setTableHeaderForType(),d.dTable.dtInstance.changeData&&d.dTable.dtInstance.changeData(d.convertTableData)})};i(function(){d.getAjaxData()},300);d.productTableData={aaData:[],aoColumns:[]},d.setTableHeaderForType(),d.dTable.dtOptions=e.fromFnPromise(d.convertTableData()).withPaginationType("simple").withDisplayLength(10).withOption("rowCallback",d.rowCallback)}]),app.controller("addSectionController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","sectionDataService","locationDataService","$route",function(a,b,c,d,e,f,g,h,i){a.successMessageSection="",a.locationListForSection=[],a.sectionList=[],a.selectedTable="",a.selectedLocationId="",a.selectedLocationName="",a.formClear=function(){a.inputLocation="",a.selectedSection=""},a.getLocationSelected=function(b){if(null!=a.inputLocation&&void 0!=a.inputLocation&&""!=a.inputLocation){var c=a.inputLocation,d=$.grep(a.locationListForSection,function(a){return a.locationId==c});a.selectedLocationId=d[0].locationId,a.selectedLocationName=d[0].locationName}},a.saveSectionForm=function(){if(void 0!=a.selectedLocationId&&null!=a.selectedLocationId&&void 0!=a.selectedLocationName&&null!=a.selectedLocationName&&null!=a.selectedSection&&void 0!=a.selectedSection){var b=[{locationId:a.selectedLocationId,locationName:a.selectedLocationName,sectionName:a.selectedSection,tables:[]}];g.addNewSection(b).then(function(b){a.formClear(),a.successMessageSection=b.msg,d(function(){a.successMessageSection="",f.showTableForm=!1,i.reload()},3e3)})}},a.getLocationList=function(){h.getAllLocation(f.token).then(function(b){for(var c=0;c<b.location.length;c++)a.locationListForSection.push({locationName:b.location[c].locationName,locationId:b.location[c].locationId})})},a.getSectionList=function(){g.getAllSection(f.token).then(function(b){for(var c=0;c<b.section.length;c++)a.sectionList.push(b.section[c].sectionName)})},a.getLocationList(),a.getSectionList()}]),app.controller("sectionController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","sectionDataService",function(a,b,c,d,e,f,g){f.showSectionForm=!1,a.successMessageSection="",a.showAddSectionForm=function(){f.showSectionForm=!0}}]),app.controller("sectionListController",["$resource","$http","$q","$scope","DTOptionsBuilder","DTColumnBuilder","$interval","$rootScope","$timeout","sectionDataService",function(a,b,c,d,e,f,g,h,i,j){h.showSectionForm=!1,d.dTable=this,d.dTable.dtInstance={},d.productTableServerData=[],d.rowCallback=function(a,b,c,d){var e=angular.element(a);return e.unbind("click").bind("click",function(a){}),a},d.convertTableData=function(){var a=c.defer();return a.resolve(d.productTableServerData),a.promise},d.setTableHeaderForType=function(){d.productTableData.aoColumns=[f.newColumn("sectionId").notSortable().withTitle("Section ID").renderWith(function(a,b,c){var d;return d=null!=c.sectionId&&void 0!=c.sectionId&&""!=c.sectionId?" <span><i> "+c.sectionId+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("locationName").notSortable().withTitle("Location Name").renderWith(function(a,b,c){var d;return d=null!=c.locationName&&void 0!=c.locationName&&""!=c.locationName?" <span><i> "+c.locationName+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("sectionName").notSortable().withTitle("Section Name").renderWith(function(a,b,c){var d;return d=null!=c.sectionName&&void 0!=c.sectionName&&""!=c.sectionName?" <span><i> "+c.sectionName+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("tables").notSortable().withTitle("Tables").renderWith(function(a,b,c){var d;return d=null!=c.tables&&void 0!=c.tables&&""!=c.tables?" <span><i> "+c.tables+"</span></i> ":" <span><i> NA </span></i> "})],d.dTable.dtColumns=d.productTableData.aoColumns},d.getAjaxData=function(){j.getAllSection(h.token).then(function(a){for(var b=[],c=0;c<a.section.length;c++)b.push(a.section[c]);d.productTableServerData=b,d.setTableHeaderForType(),d.dTable.dtInstance.changeData&&d.dTable.dtInstance.changeData(d.convertTableData)})};i(function(){d.getAjaxData()},300);d.productTableData={aaData:[],aoColumns:[]},d.setTableHeaderForType(),d.dTable.dtOptions=e.fromFnPromise(d.convertTableData()).withPaginationType("simple").withDisplayLength(10).withOption("rowCallback",d.rowCallback)}]),app.controller("addTableController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","sectionDataService","locationDataService","tableDataService","$route",function(a,b,c,d,e,f,g,h,i,j){a.successMessageTable="",a.locationListForSection=[],a.sectionListForTable=[],a.tableList=[],a.selectedSection="",a.selectedLocationIdTab="",a.selectedLocationNameTab="",a.selectedSectionIdTab="",a.selectedSectionNameTab="",a.formClear=function(){a.selectedTable="",a.inputLocation="",a.inputSection=""},a.getLocationSelected=function(b){if(null!=a.inputLocation&&void 0!=a.inputLocation&&""!=a.inputLocation){var c=a.inputLocation,d=$.grep(a.locationListForSection,function(a){return a.locationId==c});a.selectedLocationIdTab=d[0].locationId,a.selectedLocationNameTab=d[0].locationName}},a.getSectionSelected=function(b){if(null!=a.inputSection&&void 0!=a.inputSection&&""!=a.inputSection){var c=a.inputSection,d=$.grep(a.sectionListForTable,function(a){return a.sectionId==c});a.selectedSectionIdTab=d[0].sectionId,a.selectedSectionNameTab=d[0].sectionName}},a.saveTableForm=function(){if(null!=a.selectedLocationIdTab&&void 0!=a.selectedLocationIdTab&&null!=a.selectedLocationNameTab&&void 0!=a.selectedLocationNameTab&&null!=a.selectedSectionIdTab&&void 0!=a.selectedSectionIdTab&&null!=a.selectedSectionIdTab&&void 0!=a.selectedSectionIdTab&&null!=a.selectedSectionNameTab&&void 0!=a.selectedSectionNameTab){var b=[{locationId:a.selectedLocationIdTab,locationName:a.selectedLocationNameTab,sectionId:a.selectedSectionIdTab,sectionName:a.selectedSectionNameTab,tables:[{tableName:a.selectedTable}]}];i.addNewTable(b).then(function(b){a.formClear(),a.successMessageTable=b.msg,d(function(){a.successMessageTable="",f.showTableForm=!1,j.reload()},3e3)})}},a.getLocationList=function(){h.getAllLocation(f.token).then(function(b){for(var c=0;c<b.location.length;c++)a.locationListForSection.push({locationName:b.location[c].locationName,locationId:b.location[c].locationId})})},a.getSectionList=function(){g.getAllSection(f.token).then(function(b){for(var c=0;c<b.section.length;c++)a.sectionListForTable.push({sectionName:b.section[c].sectionName,sectionId:b.section[c].sectionId})})},a.getTableList=function(){i.getAllTable(f.token).then(function(b){for(var c=0;c<b.table.length;c++)a.tableList.push(b.table[c].tables[c].tableName)})},a.getLocationList(),a.getSectionList(),a.getTableList()}]),app.controller("tableController",["$scope","$mdSidenav","panelService","$timeout","$log","$rootScope","tableDataService",function(a,b,c,d,e,f,g){f.showTableForm=!1,a.successMessageTable="",a.showAddTableForm=function(){f.showTableForm=!0}}]),app.controller("tableListController",["$resource","$http","$q","$scope","DTOptionsBuilder","DTColumnBuilder","$interval","$rootScope","$timeout","tableDataService",function(a,b,c,d,e,f,g,h,i,j){h.showTableForm=!1,d.dTable=this,d.dTable.dtInstance={},d.productTableServerData=[],d.rowCallback=function(a,b,c,d){var e=angular.element(a);return e.unbind("click").bind("click",function(a){}),a},d.convertTableData=function(){var a=c.defer();return a.resolve(d.productTableServerData),a.promise},d.setTableHeaderForType=function(){d.productTableData.aoColumns=[f.newColumn("locationName").notSortable().withTitle("Location Name").renderWith(function(a,b,c){var d;return d=null!=c.locationName&&void 0!=c.locationName&&""!=c.locationName?" <span><i> "+c.locationName+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("sectionName").notSortable().withTitle("Section Name").renderWith(function(a,b,c){var d;return d=null!=c.sectionName&&void 0!=c.sectionName&&""!=c.sectionName?" <span><i> "+c.sectionName+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("tables").notSortable().withTitle("Table Name").renderWith(function(a,b,c){var d;return d=null!=c.tables&&void 0!=c.tables&&""!=c.tables&&null!=c.tables[0].tableId&&void 0!=c.tables[0].tableId&&""!=c.tables[0].tableId?" <span><i> "+c.tables[0].tableId+"</span></i> ":" <span><i> NA </span></i> "}),f.newColumn("tables").notSortable().withTitle("Tables").renderWith(function(a,b,c){var d;return d=null!=c.tables&&void 0!=c.tables&&""!=c.tables&&null!=c.tables[0].tableName&&void 0!=c.tables[0].tableName&&""!=c.tables[0].tableName?" <span><i> "+c.tables[0].tableName+"</span></i> ":" <span><i> NA </span></i> "})],d.dTable.dtColumns=d.productTableData.aoColumns},d.getAjaxData=function(){j.getAllTable(h.token).then(function(a){for(var b=[],c=0;c<a.table.length;c++)b.push(a.table[c]);d.productTableServerData=b,d.setTableHeaderForType(),d.dTable.dtInstance.changeData&&d.dTable.dtInstance.changeData(d.convertTableData)})};i(function(){d.getAjaxData()},300);d.productTableData={aaData:[],aoColumns:[]},d.setTableHeaderForType(),d.dTable.dtOptions=e.fromFnPromise(d.convertTableData()).withPaginationType("simple").withDisplayLength(10).withOption("rowCallback",d.rowCallback)}]),app.directive("autoComplete",function(a){return function(b,c,d){c.autocomplete({source:b[d.uiItems],select:function(){a(function(){c.trigger("input")},0)}})}}),app.directive("resize",function(a){return function(b,c,d){var e=angular.element(a);b.$watch(function(){return{h:e.height(),w:e.width()}},function(a,c){b.windowHeight=a.h,b.windowWidth=a.w,b.resizeWithOffset=function(c){return b.$eval(d.notifier),{height:a.h-c+"px"}}},!0),e.bind("resize",function(){b.$apply()})}});const baseURL="url-value-to-be-given-here";app.service("employeeDataService",function(a,b){function c(b){var c=a({method:"POST",url:baseURL+"/api/addEmployee",data:{employeeInfo:b}});return c.then(f,e)}function d(b){var c=a({method:"GET",url:baseURL+"/api/getAllEmployees",headers:{Authorization:b}});return c.then(f,e)}function e(a){var c="";return angular.isObject(a.data)&&a.data.message||(c=b.reject("An unknown error occurred.")),0==c.length&&(c=b.reject(a.data.message)),c}function f(a){return a.data}return{addNewEmployee:c,getAllEmployees:d}});const baseURL="url-value-to-be-given-here";app.service("locationDataService",function(a,b){function c(b){var c=a({method:"POST",url:baseURL+"/api/location",data:{locationInfo:b}});return c.then(f,e)}function d(b){var c=a({method:"GET",url:baseURL+"/api/getAllLocations",headers:{Authorization:b}});return c.then(f,e)}function e(a){var c="";return angular.isObject(a.data)&&a.data.message||(c=b.reject("An unknown error occurred.")),0==c.length&&(c=b.reject(a.data.message)),c}function f(a){return a.data}return{addNewLocation:c,getAllLocation:d}});const baseURL="url-value-to-be-given-here";app.service("loginService",function(a,b){function c(b){var c=a({method:"POST",url:baseURL+"/api/authenticate",data:{userDetails:b}});return c.then(f,e)}function d(b){var c=a({method:"GET",url:baseURL+"/api/memberinfo",headers:{Authorization:b}});return c.then(f,e)}function e(a){var c="";return angular.isObject(a.data)&&a.data.message||(c=b.reject("An unknown error occurred.")),0==c.length&&(c=b.reject(a.data.message)),c}function f(a){return a.data}return{userLogin:c,getUserDetails:d}});const baseURL="url-value-to-be-given-here";app.service("sectionDataService",function(a,b){function c(b){var c=a({method:"POST",url:baseURL+"/api/section",data:{sectionInfo:b}});return c.then(f,e)}function d(b){var c=a({method:"GET",url:baseURL+"/api/getAllSections",headers:{Authorization:b}});return c.then(f,e)}function e(a){var c="";return angular.isObject(a.data)&&a.data.message||(c=b.reject("An unknown error occurred.")),0==c.length&&(c=b.reject(a.data.message)),c}function f(a){return a.data}return{addNewSection:c,getAllSection:d}});const baseURL="url-value-to-be-given-here";app.service("tableDataService",function(a,b){function c(b){var c=a({method:"POST",url:baseURL+"/api/tables",data:{tableInfo:b}});return c.then(f,e)}function d(b){var c=a({method:"GET",url:baseURL+"/api/getAllTables",headers:{Authorization:b}});return c.then(f,e)}function e(a){var c="";return angular.isObject(a.data)&&a.data.message||(c=b.reject("An unknown error occurred.")),0==c.length&&(c=b.reject(a.data.message)),c}function f(a){return a.data}return{addNewTable:c,getAllTable:d}});